{"ast":null,"code":"import _toConsumableArray from\"C:/Users/crist/dev/mesto-react/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/crist/dev/mesto-react/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import'../index.css';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import PopupWithForm from'./PopupWithForm';import ImagePopup from'./ImagePopup';import{api}from'../utils/api';import{CurrentUserContext}from'../contexts/CurrentUserContext';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditAvatarPopupOpen=_useState2[0],setIsEditAvatarPopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditProfilePopupOpen=_useState4[0],setIsEditProfilePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAddPlacePopupOpen=_useState6[0],setIsAddPlacePopupOpen=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),selectedCard=_useState8[0],setSelectedCard=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isPhotoPopupOpen=_useState10[0],setIsPhotoPopupOpen=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),currentUser=_useState12[0],setCurrentUser=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),cards=_useState14[0],setCards=_useState14[1];useEffect(function(){Promise.all([api.getUserInfo(),api.getInitialCards()]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),dataUserInfo=_ref2[0],initialCardsData=_ref2[1];setCurrentUser(dataUserInfo);setCards(initialCardsData);}).catch(function(err){return console.log('Ошибка. Запрос не выполнен: ',err);});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){return console.log('Ошибка. Запрос не выполнен: ',err);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});}).catch(function(err){return console.log('Ошибка. Запрос не выполнен: ',err);});}var handleEditProfileClick=function handleEditProfileClick(){setIsEditProfilePopupOpen(true);};var handleEditAvatarClick=function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);};var handleAddPlaceClick=function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);};var handleCardClick=function handleCardClick(card){setSelectedCard(card);setIsPhotoPopupOpen(true);};var closeAllPopups=function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsPhotoPopupOpen(false);setSelectedCard({});};var handleUpdateUser=function handleUpdateUser(userData){api.setProfileInfo(userData).then(function(dataUserInfo){setCurrentUser(dataUserInfo);}).catch(function(err){return console.log('Ошибка. Запрос не выполнен: ',err);}).finally(function(){return closeAllPopups();});};var handleUpdateAvatar=function handleUpdateAvatar(userAvatar){api.setNewAvatar(userAvatar).then(function(userAvatar){setCurrentUser(userAvatar);}).catch(function(err){return console.log('Ошибка. Запрос не выполнен: ',err);}).finally(function(){return closeAllPopups();});};var handleAddPlaceSubmit=function handleAddPlaceSubmit(cardData){api.addNewCard(cardData).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));}).catch(function(err){return console.log('Ошибка. Запрос не выполнен: ',err);}).finally(function(){return closeAllPopups();});};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete,onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"remove-card\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",buttonText:\"\\u0414\\u0430\",children:/*#__PURE__*/_jsx(\"fieldset\",{className:\"profile-form__input-container\"})}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups,isOpen:isPhotoPopupOpen})]})});}export default App;","map":{"version":3,"names":["useState","useEffect","Header","Main","Footer","PopupWithForm","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","selectedCard","setSelectedCard","isPhotoPopupOpen","setIsPhotoPopupOpen","currentUser","setCurrentUser","cards","setCards","Promise","all","getUserInfo","getInitialCards","then","dataUserInfo","initialCardsData","catch","err","console","log","handleCardLike","card","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","state","map","c","handleCardDelete","deleteCard","filter","handleEditProfileClick","handleEditAvatarClick","handleAddPlaceClick","handleCardClick","closeAllPopups","handleUpdateUser","userData","setProfileInfo","finally","handleUpdateAvatar","userAvatar","setNewAvatar","handleAddPlaceSubmit","cardData","addNewCard"],"sources":["C:/Users/crist/dev/mesto-react/mesto-react/src/components/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport '../index.css';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport { api } from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\n\nfunction App() {\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({});\n  const [isPhotoPopupOpen, setIsPhotoPopupOpen] = useState(false);\n  const [currentUser, setCurrentUser] = useState({})\n  const [cards, setCards] = useState([]);\n\n  useEffect(() => {\n    Promise.all([\n      api.getUserInfo(),\n      api.getInitialCards()\n    ])\n      .then(([dataUserInfo, initialCardsData]) => {\n        setCurrentUser(dataUserInfo)\n        setCards(initialCardsData)\n      })\n      .catch(err => console.log('Ошибка. Запрос не выполнен: ', err))\n  }, [])\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(err => console.log('Ошибка. Запрос не выполнен: ', err))\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch(err => console.log('Ошибка. Запрос не выполнен: ', err));\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true)\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n    setIsPhotoPopupOpen(true)\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsPhotoPopupOpen(false);\n    setSelectedCard({});\n  }\n\n  const handleUpdateUser = (userData) => {\n    api.setProfileInfo(userData)\n      .then((dataUserInfo) => {\n        setCurrentUser(dataUserInfo);\n      })\n      .catch(err => console.log('Ошибка. Запрос не выполнен: ', err))\n      .finally(() => closeAllPopups())\n  }\n\n  const handleUpdateAvatar = (userAvatar) => {\n    api.setNewAvatar(userAvatar)\n      .then((userAvatar) => {\n        setCurrentUser(userAvatar);\n      })\n      .catch(err => console.log('Ошибка. Запрос не выполнен: ', err))\n      .finally(() => closeAllPopups())\n  }\n\n  const handleAddPlaceSubmit = (cardData) => {\n    api.addNewCard(cardData)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n      })\n      .catch((err) => console.log('Ошибка. Запрос не выполнен: ', err))\n      .finally(() => closeAllPopups())\n  }\n\n  return (\n    <div className=\"App\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n        <Main\n          cards={cards}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n          onEditAvatar={handleEditAvatarClick}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onCardClick={handleCardClick}\n        />\n        <Footer />\n\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n\n        <PopupWithForm\n          name='remove-card'\n          title='Вы уверены?'\n          buttonText='Да'>\n          <fieldset className=\"profile-form__input-container\">\n          </fieldset>\n        </PopupWithForm>\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n          isOpen={isPhotoPopupOpen} />\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"wQAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAO,cAAP,CACA,MAAOC,OAAP,KAAmB,UAAnB,CACA,MAAOC,KAAP,KAAiB,QAAjB,CACA,MAAOC,OAAP,KAAmB,UAAnB,CACA,MAAOC,cAAP,KAA0B,iBAA1B,CACA,MAAOC,WAAP,KAAuB,cAAvB,CACA,OAASC,GAAT,KAAoB,cAApB,CACA,OAASC,kBAAT,KAAmC,gCAAnC,CACA,MAAOC,iBAAP,KAA6B,oBAA7B,CACA,MAAOC,gBAAP,KAA4B,mBAA5B,CACA,MAAOC,cAAP,KAA0B,iBAA1B,C,wFAEA,QAASC,IAAT,EAAe,CAEb,cAA0DZ,QAAQ,CAAC,KAAD,CAAlE,wCAAOa,qBAAP,eAA8BC,wBAA9B,eACA,eAA4Dd,QAAQ,CAAC,KAAD,CAApE,yCAAOe,sBAAP,eAA+BC,yBAA/B,eACA,eAAsDhB,QAAQ,CAAC,KAAD,CAA9D,yCAAOiB,mBAAP,eAA4BC,sBAA5B,eACA,eAAwClB,QAAQ,CAAC,EAAD,CAAhD,yCAAOmB,YAAP,eAAqBC,eAArB,eACA,eAAgDpB,QAAQ,CAAC,KAAD,CAAxD,0CAAOqB,gBAAP,gBAAyBC,mBAAzB,gBACA,gBAAsCtB,QAAQ,CAAC,EAAD,CAA9C,2CAAOuB,WAAP,gBAAoBC,cAApB,gBACA,gBAA0BxB,QAAQ,CAAC,EAAD,CAAlC,2CAAOyB,KAAP,gBAAcC,QAAd,gBAEAzB,SAAS,CAAC,UAAM,CACd0B,OAAO,CAACC,GAAR,CAAY,CACVrB,GAAG,CAACsB,WAAJ,EADU,CAEVtB,GAAG,CAACuB,eAAJ,EAFU,CAAZ,EAIGC,IAJH,CAIQ,cAAsC,kCAApCC,YAAoC,UAAtBC,gBAAsB,UAC1CT,cAAc,CAACQ,YAAD,CAAd,CACAN,QAAQ,CAACO,gBAAD,CAAR,CACD,CAPH,EAQGC,KARH,CAQS,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CF,GAA5C,CAAJ,EARZ,EASD,CAVQ,CAUN,EAVM,CAAT,CAYA,QAASG,eAAT,CAAwBC,IAAxB,CAA8B,CAC5B,GAAMC,QAAO,CAAGD,IAAI,CAACE,KAAL,CAAWC,IAAX,CAAgB,SAAAC,CAAC,QAAIA,EAAC,CAACC,GAAF,GAAUrB,WAAW,CAACqB,GAA1B,EAAjB,CAAhB,CAEArC,GAAG,CAACsC,oBAAJ,CAAyBN,IAAI,CAACK,GAA9B,CAAmCJ,OAAnC,EACGT,IADH,CACQ,SAACe,OAAD,CAAa,CACjBpB,QAAQ,CAAC,SAACqB,KAAD,QAAWA,MAAK,CAACC,GAAN,CAAU,SAACC,CAAD,QAAOA,EAAC,CAACL,GAAF,GAAUL,IAAI,CAACK,GAAf,CAAqBE,OAArB,CAA+BG,CAAtC,EAAV,CAAX,EAAD,CAAR,CACD,CAHH,EAIGf,KAJH,CAIS,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CF,GAA5C,CAAJ,EAJZ,EAKD,CAED,QAASe,iBAAT,CAA0BX,IAA1B,CAAgC,CAC9BhC,GAAG,CAAC4C,UAAJ,CAAeZ,IAAI,CAACK,GAApB,EACGb,IADH,CACQ,UAAM,CACVL,QAAQ,CAAC,SAACqB,KAAD,QAAWA,MAAK,CAACK,MAAN,CAAa,SAACH,CAAD,QAAOA,EAAC,CAACL,GAAF,GAAUL,IAAI,CAACK,GAAtB,EAAb,CAAX,EAAD,CAAR,CACD,CAHH,EAIGV,KAJH,CAIS,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CF,GAA5C,CAAJ,EAJZ,EAKD,CAED,GAAMkB,uBAAsB,CAAG,QAAzBA,uBAAyB,EAAM,CACnCrC,yBAAyB,CAAC,IAAD,CAAzB,CACD,CAFD,CAIA,GAAMsC,sBAAqB,CAAG,QAAxBA,sBAAwB,EAAM,CAClCxC,wBAAwB,CAAC,IAAD,CAAxB,CACD,CAFD,CAIA,GAAMyC,oBAAmB,CAAG,QAAtBA,oBAAsB,EAAM,CAChCrC,sBAAsB,CAAC,IAAD,CAAtB,CACD,CAFD,CAIA,GAAMsC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACjB,IAAD,CAAU,CAChCnB,eAAe,CAACmB,IAAD,CAAf,CACAjB,mBAAmB,CAAC,IAAD,CAAnB,CACD,CAHD,CAKA,GAAMmC,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CAC3B3C,wBAAwB,CAAC,KAAD,CAAxB,CACAE,yBAAyB,CAAC,KAAD,CAAzB,CACAE,sBAAsB,CAAC,KAAD,CAAtB,CACAI,mBAAmB,CAAC,KAAD,CAAnB,CACAF,eAAe,CAAC,EAAD,CAAf,CACD,CAND,CAQA,GAAMsC,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,QAAD,CAAc,CACrCpD,GAAG,CAACqD,cAAJ,CAAmBD,QAAnB,EACG5B,IADH,CACQ,SAACC,YAAD,CAAkB,CACtBR,cAAc,CAACQ,YAAD,CAAd,CACD,CAHH,EAIGE,KAJH,CAIS,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CF,GAA5C,CAAJ,EAJZ,EAKG0B,OALH,CAKW,iBAAMJ,eAAc,EAApB,EALX,EAMD,CAPD,CASA,GAAMK,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,UAAD,CAAgB,CACzCxD,GAAG,CAACyD,YAAJ,CAAiBD,UAAjB,EACGhC,IADH,CACQ,SAACgC,UAAD,CAAgB,CACpBvC,cAAc,CAACuC,UAAD,CAAd,CACD,CAHH,EAIG7B,KAJH,CAIS,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CF,GAA5C,CAAJ,EAJZ,EAKG0B,OALH,CAKW,iBAAMJ,eAAc,EAApB,EALX,EAMD,CAPD,CASA,GAAMQ,qBAAoB,CAAG,QAAvBA,qBAAuB,CAACC,QAAD,CAAc,CACzC3D,GAAG,CAAC4D,UAAJ,CAAeD,QAAf,EACGnC,IADH,CACQ,SAACe,OAAD,CAAa,CACjBpB,QAAQ,EAAEoB,OAAF,4BAAcrB,KAAd,GAAR,CACD,CAHH,EAIGS,KAJH,CAIS,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CF,GAA5C,CAAT,EAJT,EAKG0B,OALH,CAKW,iBAAMJ,eAAc,EAApB,EALX,EAMD,CAPD,CASA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,MAAC,kBAAD,CAAoB,QAApB,EAA6B,KAAK,CAAElC,WAApC,wBACE,KAAC,MAAD,IADF,cAEE,KAAC,IAAD,EACE,KAAK,CAAEE,KADT,CAEE,UAAU,CAAEa,cAFd,CAGE,YAAY,CAAEY,gBAHhB,CAIE,YAAY,CAAEI,qBAJhB,CAKE,aAAa,CAAED,sBALjB,CAME,UAAU,CAAEE,mBANd,CAOE,WAAW,CAAEC,eAPf,EAFF,cAWE,KAAC,MAAD,IAXF,cAaE,KAAC,gBAAD,EAAkB,MAAM,CAAEzC,sBAA1B,CAAkD,OAAO,CAAE0C,cAA3D,CAA2E,YAAY,CAAEC,gBAAzF,EAbF,cAcE,KAAC,aAAD,EAAe,MAAM,CAAEzC,mBAAvB,CAA4C,OAAO,CAAEwC,cAArD,CAAqE,UAAU,CAAEQ,oBAAjF,EAdF,cAeE,KAAC,eAAD,EAAiB,MAAM,CAAEpD,qBAAzB,CAAgD,OAAO,CAAE4C,cAAzD,CAAyE,cAAc,CAAEK,kBAAzF,EAfF,cAiBE,KAAC,aAAD,EACE,IAAI,CAAC,aADP,CAEE,KAAK,CAAC,0DAFR,CAGE,UAAU,CAAC,cAHb,uBAIE,iBAAU,SAAS,CAAC,+BAApB,EAJF,EAjBF,cAyBE,KAAC,UAAD,EACE,IAAI,CAAE3C,YADR,CAEE,OAAO,CAAEsC,cAFX,CAGE,MAAM,CAAEpC,gBAHV,EAzBF,GADF,EADF,CAkCD,CAED,cAAeT,IAAf"},"metadata":{},"sourceType":"module"}